---
layout: post
title: 'Sysadmin panics: dischi, questi sconosciuti!'
date: '2012-10-28T17:00:00.000+01:00'
author: Luca Ferrari
tags:
- sysadmin panics
modified_time: '2012-10-28T17:07:08.957+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-1183768657673131078
blogger_orig_url: http://fluca1978.blogspot.com/2012/10/sysadmin-panics-dischi-questi.html
---

<div style="text-align: justify;">Qualche altro episodio esilarante dalla mia esperienza con alcuni sysadmin di dubbio talento!</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: large;">fsck /your/rw/filesystem</span></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;">Una delle cose che francamente considero assodate è che un filesystem montato in lettura/scrittura non dovrebbe mai essere passato a nessun tool diagnostico, inscluo <i>fsck</i>. Eppure c'è chi, insospettito da strani comportamenti (non errori!) del proprio filesystem decide di lanciare a tappeto un <i>fsck</i> su ogni file system montato su un server di produzione. Buona fortuna!</span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;">&nbsp;<span style="font-size: large;">Quando i dischi spariscono....</span></span></span></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;">Le moderne implementazioni di gestione dell'hardware (es. <i>devfs</i>) consentono al sistema di rimuovere o aggiungere i nodi sotto a <i>/dev</i> dinamicamente. Questo significa che se un disco si rompe improvvisamente, e quindi "sparisce" dal sistema, il suo nodo in <i>/dev</i> verrà anch'esso rimosso appena possibile. Ora, non importa quante volte l'amministratore nel panico lanci <i>fsck /dev/missing</i> o <i>fdisk /dev/missing</i>, il disco non tornerà ad apparire. Si prenda atto del fatto che il sistema molto spesso è piu' robusto della mente del sysadmin stesso!</span></span></span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;">Il partizionamento, questo sconosciuto</span></span></span></span></span></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;">Questo mi ricorda un po' il problema dell'inserimento degli account utenti a mano: se si deve "clonare" esattamente la tabella delle partizioni di un disco, non serve copiarla a mano da uno all'altro. Esistono infatti appositi strumenti, come <i>fdisk</i>, che possono fare il lavoro sporco per noi, risultando anche piu' precisi di quello che non saremmo stati. Quindi per cortesia, non fatemi assistere nuovamente a scene di sysadmin che copiano una ad una le partizioni da un disco (o almeno se proprio devo assistervi, almeno che le partizioni siano non piu' di due!).</span></span></span></span></span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;">Il RAID, questo sconosciuto</span></span></span></span></span></span></span></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;">Grande invenzione il RAID, anche se a volta il suo omonimo insetticida annebbia la mente del sysadmin di turno. Per prima cosa si deve sempre avere chiaro se si parla di RAID software o hardware, e che relazioni ci sono perché ovviamente i due sono stackable. In entrambi i casi però è bene tenere presente che nessuno dei due tipi di RAID è <i>automagico</i>: sostituire un disco rotto e sperare che questo sia partizionato, sincronizzato e messo on-line automaticamente è utopia. Almeno, non ho ancora incontrato un server o un OS che faccia questo. Meglio quindi leggere attentamente la documentazione del RAID in questione. E meglio ancora, si studi il RAID e i suoi livelli, per capire anche come le varie partizioni o i vari dischi devono essere <i>assemblati</i>.</span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;">UUID, questo sconosciuto</span></span></span></div><div style="text-align: justify;"><span style="font-size: large;"><span style="font-size: small;"><span style="font-size: large;"><span style="font-size: small;">Se un server inizia a dare errori su una partizione <i>abcdef22a78cd18.....</i> o qualcosa di simile, si provi a costruire la tabella degli UUID dei propri dischi e si controlli che cosa il server tenta di montare. C'è un qualche identificativo sbagliato (ad esempio perché un disco è stato sostituito).</span> </span>&nbsp;</span></span></div><br /><span style="font-size: large;"><span style="font-size: small;">&nbsp;</span> </span>