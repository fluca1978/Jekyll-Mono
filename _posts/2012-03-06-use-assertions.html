---
layout: post
title: Use assertions!
date: '2012-03-06T21:00:00.001+01:00'
author: Luca Ferrari
tags:
- programmazione
- programming best practice
modified_time: '2012-03-06T21:00:02.148+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-8921682141999297651
blogger_orig_url: http://fluca1978.blogspot.com/2012/03/use-assertions.html

permalink: /:year/:month/:day/:title.html
---


<h1>~</h1>


You use assertions, don't you?<br />Today almost every language/framework/library provides developers with an <i>assertion-like</i> set of tools. Use them!<br /><div style="text-align: justify;">The point is not that assertions are good for testing critical conditions, it is that they help documenting the code. Allow me to explain with an example:</div><br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">private String doSomething( String input ){</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp;&nbsp; assert( input != null );</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp;&nbsp; return <something input="" on="">; </something></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">}</span></div><br /><div style="text-align: justify;">What can you see here? That the <i>input</i> object cannot be null. Trivial. But there's more: developers are working here assuming someone has called <i>doSomething</i> with a null object argument, that is having <i>input</i> null is not only bad, it is a catastrophe! So if you are a <i>doSomething</i> client you are supposed to provide the right value for input arguments.&nbsp;</div><div style="text-align: justify;">Now, please remember that assertions are totally different from exceptions. The above method could have been written as:</div><br /><br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">private String doSomething( String input ){</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp;&nbsp; if( input == null )</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Error();</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp;&nbsp; return <something input="" on="">; </something></span> </div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">}</span></div><br /><div style="text-align: justify;">This is totally different: in the former method the developers clearly stated that they do not want to deal with a null <i>input</i>, it's on you to provide a not-null input object. In the above example instead developers are somehow dealing with null values, even if they are letting you to know that you did something wrong.</div><div style="text-align: justify;">So when to use assertions and when to not use them? Assertions should be used for all the internal stuff, e.g., private methods, so things that should be called when input is not tainted. On the other hand, if you think you are going to get bad input, deal with it!</div><div style="text-align: justify;">And remember: assertions are going to vanish when you are in release mode, so do not place anything more complex than a boolean test in them. For instance:</div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">private void doSomethingElse(){</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp; assert( loadDataFromDatabase() != true );</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp; &nbsp; ... </span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">}&nbsp;</span></div><br />This is ugly wrong! Once the assertion is disabled, chances are (depending on the assertion mechanism of the language/framework/library), that the call to <i>loadDataFromDatabase</i> disappears too, and with it all your loading-data!<br /><div style="text-align: justify;">So please use assertions, and use against single variables!</div>