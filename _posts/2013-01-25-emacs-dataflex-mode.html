---
layout: post
title: Emacs Dataflex Mode
date: '2013-01-25T22:53:00.000+01:00'
author: Luca Ferrari
tags:
- emacs
- dataflex
modified_time: '2013-01-25T22:53:00.403+01:00'
thumbnail: http://1.bp.blogspot.com/-EA0S41hm_k4/UQJ_1mbbmKI/AAAAAAAAA_A/1TN1gTJvYOY/s72-c/df-mode7.png
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-4277137294952615335
blogger_orig_url: http://fluca1978.blogspot.com/2013/01/emacs-dataflex-mode.html

permalink: /:year/:month/:day/:title.html
---


<h1>~</h1>


<div style="text-align: justify;">I have already written something about my idea of implementing an <a href="http://fluca1978.blogspot.it/2012/10/emacs-dataflex-major-mode.html">Emacs major mode</a> to help the development of Dataflex applications.</div><div style="text-align: justify;">In the last evenings I've worked on such idea and now the Dataflex mode is something concrete that is available for download from one of my GitHub <a href="https://github.com/fluca1978/fluca1978-coding-bits/blob/master/emacs-lisp/dataflex-mode.el">repositories</a>.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">First of all, please consider that I'm no more a Dataflex developer, so I don't use this mode in day-by-day workflow, and therefore bug fixing</div><div style="text-align: justify;">could take time. Second, I've written this mode to mainly get more experience in Emacs Lisp programming, and since this is my first major mode at all, it could contain several errors. As in the best Open Source tradition, help and comments are welcome!</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">So what does the Dataflex mode provides? The first thing is syntax highlighting: as shown by the following picture keywords are now</div><div style="text-align: justify;">expressed using the Emacs font-locks, as well as parts of the masks (in particular the fields and mask delimiters). Of course the mode line of Emacs is updated to reflect the usage of the Dataflex mode for recognized files (usually .frm).</div><div style="text-align: justify;">Then a few utility commands are builtin in the mode:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">- <i>C-c C-t</i> provides the transpose of a single MOVE instruction or a whole group. The idea is that often you have to write a lot of statements like the following:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>MOVE archive.field TO mask.field</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">and the opposite statement in order to save back the field from the mask to the archive as in:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>MOVE mask.field TO archive.field</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">The transposition of the statement automatically converts the former in the latter and viceversa, so that it is possible to copy, paste and transpose an instruction without having to type any character. The</div><div style="text-align: justify;">function can work on a single line or a whole region.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">- <i>C-c C-i</i> indents the code. Well, there is not a defined way of indenting Dataflex code, so this function simply searches for a BEGIN/END like block and indents it recursively. It can operate on the whole buffer or on the specified section.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">- <i>M-;</i> as for all the other programming modes, this allows for the definition of comments.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">- <i>C-c C-j</i> jumps to a label. Often you read a piece of code that contains either a <i>GOUSB</i> or a <i>GOTO</i> instruction followed by a label. If the label is far in the code, but is in the same buffer, this command splits the current</div><div style="text-align: justify;">window and jump to the label definition, so that the result is a quick&nbsp; consultancy of the routine.</div><div style="text-align: justify;"><br /></div><div class="separator" style="clear: both; text-align: justify;"><a href="http://1.bp.blogspot.com/-EA0S41hm_k4/UQJ_1mbbmKI/AAAAAAAAA_A/1TN1gTJvYOY/s1600/df-mode7.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="http://1.bp.blogspot.com/-EA0S41hm_k4/UQJ_1mbbmKI/AAAAAAAAA_A/1TN1gTJvYOY/s400/df-mode7.png" width="346" /></a></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">In order to install the mode into your Emacs download the lisp file into a suitable path, for instance into <i>~/.emacs.d</i> and insert the following lines into your <i>.emacs</i> configuration file:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: xx-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">;;  Dataflex mode </span></span></div><div style="text-align: justify;"><span style="font-size: xx-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">(add-to-list&nbsp;</span></span></div><div style="text-align: justify;"><span style="font-size: xx-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; 'load-path "/path/to/the/directory/that/contains/the/lisp/file" )</span></span></div><div style="text-align: justify;"><span style="font-size: xx-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">(require 'dataflex-mode)</span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Please note that the mode automatically associates itself to files ending in <i>.frm</i> or <i>.mac</i>.<span style="font-size: x-small;"> </span>The mode provides an hook called <i>dataflex-mode-hook</i> so that it is possible to customize further<span style="font-size: x-small;"> </span>the mode behavior.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Finally, I posted a <a href="http://support.dataaccess.com/Forums/showthread.php?49747-Dataflex-Emacs-Mode&amp;p%3D250869#post250869">message</a> on the DataAccess Forums about the mode.</div>