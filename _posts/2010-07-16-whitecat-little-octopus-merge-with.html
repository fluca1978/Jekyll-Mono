---
layout: post
title: 'WhiteCat: a little octopus merge with several features'
date: '2010-07-16T15:13:00.002+02:00'
author: Luca Ferrari
tags:
- research
- WhiteCat
- java
modified_time: '2010-07-20T07:39:29.705+02:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-6882442458725201949
blogger_orig_url: http://fluca1978.blogspot.com/2010/07/whitecat-little-octopus-merge-with.html
---

<div style="text-align: justify;">Today I pushed a little octopus <a href="http://whitecat.git.sourceforge.net/git/gitweb.cgi?p=whitecat/whitecat;a=commit;h=85bb0cab1559a2f508caa01089eb575aeb32e9ee">merge</a> (three branches) I have developed during last nights. This commit introduces a new set of features in the WhiteCat framework; such changes are for a long term view of the project and do not touch heavily the user's interface.</div><div style="text-align: justify;">First of all now there are a few JUnit tests that, besides testing the framework, can be used as examples for understanding how WhiteCat internally works and how facilities and APIs should be used.</div><div style="text-align: justify;">Then comes the support for a <b>customizable proxy cloning</b>. In the past, when a role manipulation was completing, WhiteCat invoked the <i>updateProxy</i> method on a proxy handler in order to copy the proxy status from the old instance to the new one. This works fine if the proxy and the proxy handler are tied together, since the proxy handler will not copy any "extended" status it is not aware of. This is fine for WhiteCat to work, but is not useful for a developer that wants to develop its own proxy class. To solve the problem a new interface has been added, <i>ICloneableAgentProxy</i>, that if applied to a proxy instrument WhiteCat to clone the old proxy instance. Please note that the cloning is manual, that is on the proxy developer, since it is not possible to use the standard Java cloning methodology since this will not allow WhiteCat to work and manipulate proxy classes. To summarize, if you have defined a new proxy and want to keep its internal status, use the <i>ICloneableAgentProxy</i> interface and implement the <i>cloneAgentProxyState(..)</i> method to control the copy field by field.</div><div style="text-align: justify;">But how can a developer install his own proxies in the system? Here comes another interesting new feature: <b>WhiteCat now can be fully configured using <a href="http://www.springsource.org/">Spring</a>!</b> This means that the old configuration, based on properties, is no more used (and is deprecated) and it is possible to specify exactly which classes instances should be used as proxy handlers, agents, and even as role booster (so this means you can implement your own!). Of course, introducing Spring lead to a deep refactoring of the main internal structures in order to support dependency injection. The result is that now there are a lot of different interfaces, one for each configurable component.</div><div style="text-align: justify;">There is now also a <b>unique factory, implemented by the <i>WhiteCat</i> class</b>. This is not a way to remove factories for configurable objects, but to have a single entry point to get an object instance. The idea is that each object should be created by its factory, and the factory itself should rely on Spring, while the <i>WhiteCat</i> class exposes a common interface to all the factories.</div><div style="text-align: justify;">Finally, the most difficult change, is <b>the introduction of a <i>RoleOperation</i>, a wrapper around all role manipulation informations</b> (which agent, which proxy, which role, etc.). This is deeply used by the current role booster implementation, and this means that the booster is now instrumented by such role operation. This is a not fully completed implementation of the <i>Command Pattern</i>; it is lacking the <i>execute command</i> way, that could be added in the future. The adoption of the role operation abstraction opens new ways: it will be possible to fully implement a command pattern, to queue and manage multiple role operations, and to keep a track about who asked for what and what was the result.</div>