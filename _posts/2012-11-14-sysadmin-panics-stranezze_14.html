---
layout: post
title: 'Sysadmin panics: stranezze'
date: '2012-11-14T17:57:00.000+01:00'
author: Luca Ferrari
tags:
- sysadmin panics
modified_time: '2012-11-14T17:57:00.263+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-9216997001209450486
blogger_orig_url: http://fluca1978.blogspot.com/2012/11/sysadmin-panics-stranezze_14.html
---

<br /><span style="font-size: large;">chmod? chown!</span><br /><br />Piu' volte ho visto l'uso di <i>chmod </i>al posto di <i>chown</i>.<br />Situazione: si vuole dare accesso ad un file o una directory ad un utente che non e' proprietario o non risulta<br />nel gruppo proprietario.<br />Cosa si fa quindi?<br />Un bel <i>chmod 777</i> e si risolve il problema.<br />O se ne creano altri (di problemi)?<br /><div style="text-align: justify;">Eh si, perche' un <i>chmod 777</i> implica dare anche il permesso di esecuzione a tutto il mondo. E' veramente questo che si vuole? Si vuole poter eseguire un file di testo (che magari viene inavvertitamente infettato e si&nbsp; tramuta in uno script malevolo)?&nbsp;</div><div style="text-align: justify;">No, quello che si vuole e' zittire rapidamente l'utente dandogli l'accesso.&nbsp;</div><div style="text-align: justify;">La soluzione corretta e' quella di inserire l'utente nel gruppo giusto, facendo nel caso un chown del&nbsp;</div><div style="text-align: justify;">file/directory in modo da consentire la corretta profilazione.&nbsp;</div><div style="text-align: justify;">Se poi si e' dei virtuosi, le ACL possono aiutare!</div><br /><br /><br /><span style="font-size: large;">crontab &amp; chmod = chmod on steroids!</span><br /><br />Si e' mai visto una linea in crontab del tipo:<br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br />* * * * * * chmod 777 /path/to/some/public/share/*</span><br /><br />Io l'ho vista! <br />Cosa fa? <br />Modifica ogni minuto i permessi di ogni file in una cartella pubblica dando ogni permesso ad ogni possibile<br />utente del mondo. Si valuti se la configurazione della share e' quella desiderata e se veramente lo spool del<br />server debba essere usato come un keyboard-monkey!<br /><br /><br /><br /><br /><span style="font-size: large;">Pippo, Pluto e Paperino</span><br /><br /><br /><div style="text-align: justify;">Come non sopporto la gente che continua a nominare i file come "pippo", oppure "pluto" oppure "paperino". </div><div style="text-align: justify;">Alcuni studenti lasciano la loro home directory piena anche di file dai nomi ben piu' volgari, ma che un&nbsp; sysadmin debba usare ancora nomi cosi' ridicoli per i propri file di configurazione e' una vergogna.&nbsp;&nbsp;</div><div style="text-align: justify;">Ma ancora peggio e' chi inserisce tali file in un sistema di controllo delle versioni: che senso ha memorizzare la storia di un file di nome <i>pippo127.sh</i> che, evidentemente, o non cambiera' mai (sara' sostituito da <i>pippo128.sh</i>) oppure cambiera' totalmente!</div><br /><br /><span style="font-size: large;">Cavi, label, diagrammi e mount point</span><br /><br />Ovvero: siate ordinati, siate coerenti. Se un server dispone di piu' schede di rete, le si rinomini opportunamente e si etichettino i cavi e le prese. E possibilmente, quando si modifica qualcosa si tenga il sistema dei nomi aggiornato! E' frustrante cercare di capire come mai il firewall sta facendo passare il traffico&nbsp; fra l'interfaccia <i>WAN1 </i>e <i>DMZ </i>indiscriminatamente solo per scoprire che la prima interfaccia e' stata riconfigurata per operare come <i>LAN</i>...<br />E a tal proposito, si scelgano dei mount point con nomi significativi: non serve a niente montare un device in rete come /mnt/storage, a meno che il dispositivo remoto non si chiami effettivamente "storage". Molto meglio codificare il nome del dispositivo, come ad esempio <i>NAS_p1_s37</i> (NAS al primo piano nella stanza 37) e si usi un mount point opportuno come <i>/mnt/NAS_p1_s37</i>. Meglio ancora, si suddividano i mount point&nbsp; per tipo e priorita', cosi' che gli script possano smontare o rimontare tutti i device agilmente come ad esempio<i> /mnt/NAS/NAS_p1_s37</i>.<br /><br /><br /><br /><span style="font-size: large;">Commenti da lasciare senza commenti!</span><br /><br /><div style="text-align: justify;">Gran cosa i commenti: consentono al sysadmin di aggiungere delle annotazioni nei file di configurazione per&nbsp; indicare perche' si sta facendo quello che si sta facendo. O almeno per esprimere al mondo quello che si vorrebbe fare (che poi ci si riesca e' un'altra cosa!). Ma i commenti sono utili solo se sono mirati, ossia se sono posizionati nel punto della configurazione alla quale il commento si riferisce. In altre parole, mettere dei commenti in cima ad un file specificando cosa si fa nel file in un punto imprecisato (tipicamente almeno una&nbsp; videata sotto) e' totalmente inutile. E peggio ancora e' tenere la storia dei commenti nello stesso file: si usi un&nbsp; sistema di controllo delle versioni per tenere traccia della storia evolutiva di un file.</div><br />