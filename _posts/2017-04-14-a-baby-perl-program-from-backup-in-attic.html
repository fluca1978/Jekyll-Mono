---
layout: post
title: A baby Perl program from a backup in the attic!
date: '2017-04-14T19:18:00.000+02:00'
author: Luca Ferrari
tags:
- perl
- planet-perl-ironman
modified_time: '2017-04-14T19:18:14.381+02:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-3945751672271861571
blogger_orig_url: http://fluca1978.blogspot.com/2017/04/a-baby-perl-program-from-backup-in-attic.html
---

…I was assigned one of my very first program to develop: a way to assure an user can run no more than a specific number of instances<br />of the same executable.<br /><br /><br />The real story was this: a company was using an Unix ncurses based ERP, and users were forced to connect via remote shell and<br />launch it automatically. The problem was that several users were opening more terminals (and therefore ERP clients) limiting<br />resources to other users.<br /><br /><br />I wanted to demonstrate my skills being able to implement the solution in a couple of hours, and instead of spending time<br />searching for a production-ready solution on the Internet, I decided to do it all on my own.<br /><br /><br />It was clear to me I was needing a kind of <i>wrapper</i> to control the execution of external programs. In fact, since users were<br />automatically switched from the remote shell into the ERP client, it did suffice to place the wrapper as the<br />user shell.<br /><br /><br />But how to implement it? At that time I knew Java, C++, C, Perl and some Bourne Shell. Making it in Java was too heavy, and<br />most notably required to install a JVM on the server (it was the time of the Red Hat 5 branch). C and C++ required too much time<br />to come with a working solution, and Perl was the most promising allowing me to do everything I was able to do with<br />other languages, overcoming the limitation of the shell (e.g., arithmetic).<br /><br /><br />But at that time I was not a <i>fluent Perl developer</i>.<br /><br /><br />A few days ago I found the above program out of an old backup, and so I spent five minutes to read it again. Not surprisingly, I found<br />it awful with respect to the code I write today, and moreover I see a lot of code uglyness due to <i>baby steps</i>. But hey, it was fun<br />to see how many things I've changed in my coding style, idioms, adoption of the language and of its operators, and most notably<br />about how I'm today <b>toward compact code</b> instead of <i>long and blown code</i>. At that time I was convinced that as long the code was, as much<br />it must be simpler to read, today I believe it is the opposite (with a very few exceptions I tend not to adopt until I<br />can remember very well).<br /><br /><br />In this article I will dissect a few parts of the above program to show you how I was writing code back in those days, and it was<br />a huge time ago (at least in computer timeline): <i>15+ years ago</i>.<br /><br /><br /><div class="outline-2" id="outline-container-org9f27a0c"><h2 id="org9f27a0c"><span class="section-number-2">2</span> Baby Steps</h2><div class="outline-text-2" id="text-2">Well, as you can imagine when I started doing a real job I was nothing more than a <i>programmer-to-be</i>, and my knowlegde<br />about Perl was really tiny. I mean, I read the Camel Book (of course!), and I was experimenting with Perl as much as I could,<br />but I was not an avid consumer of the Perl community (as well as other communities) and so I did not have a lot of chances<br />to learn from other people experience and code.<br /><br /><br />More than that, I just finished my university degree, and so my mind was literally full of theories about writing<br />correct and beautiful code, but that were just theories without any implementation! And last but not least, I was convinced<br />I could do everything by my own (that is, <i>who needs modules?</i>).<br /><br /><br />Today I recognize the following as baby steps in the Perl world.<br /></div><br /><div class="outline-3" id="outline-container-org952f698"><h3 id="org952f698"><span class="section-number-3">2.1</span> Method Prototypes</h3><div class="outline-text-3" id="text-2-1">Yes, I was using prototypes everywhere.<br /><br /><br />Why? I suspect they were comfortable to me, since I was used to languages where each method has a prototype (C, C++, Java), and<br />so I was trying to use a kind of <i>common</i> approach to every language, applying to Perl prototypes even when I was not needing<br />them at all!<br /><br /><br />Of course, by time and experience, I found that prototypes are usually not useful at all in my programs, and made refactoring<br />a lot harder.<br /></div></div><br /><div class="outline-3" id="outline-container-org8b7397a"><h3 id="org8b7397a"><span class="section-number-3">2.2</span> Method instead of Operators</h3><div class="outline-text-3" id="text-2-2">Perl allows operators to be used without braces, but that was something my eyes were not able to parse!<br />Again, coming from languages where methods and operators both need parentheses, I tried to bend Perl to my will<br />and use operators the very same way.<br /></div></div><br /><div class="outline-3" id="outline-container-orga9e10a4"><h3 id="orga9e10a4"><span class="section-number-3">2.3</span> Untrusting the Thruth</h3><div class="outline-text-3" id="text-2-3">Perl has the great ability to cast a variable depending on the context, but it was something too much complex for me.<br />So for instances, instead of testing a scalar against a not-true value, I was using the <i>defined</i> operator:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="background-color: #292e34; color: chartreuse; font-style: italic;"># </span><span style="background-color: #292e34; color: chartreuse; font-style: italic;">if ( $scalar )</span><br /><span style="color: cyan; font-weight: bold;">if</span> ( defined $<span style="color: orange;">scalar</span> ){ ... }<br /></pre></div><br />Worst: I was not using the ability of an array to be scalar-contextualized in tests:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="background-color: #292e34; color: chartreuse; font-style: italic;">#</span><span style="background-color: #292e34; color: chartreuse; font-style: italic;">if ( ! @array )</span><br /><span style="color: cyan; font-weight: bold;">if</span> ( not defined @<span style="color: orange; text-decoration: underline;">array</span> || $#<span style="color: orange; text-decoration: underline;">array</span> &lt;= <span style="color: violet; font-style: italic; font-weight: bold;">0</span> ){ ... }<br /></pre></div></div></div><br /><div class="outline-3" id="outline-container-org15527ab"><h3 id="org15527ab"><span class="section-number-3">2.4</span> Global Variables</h3><div class="outline-text-3" id="text-2-4"><code>my</code> what?<br /><br /><br />I was not using scoped variables, and the reasons were:<br /><br /><ol class="org-ol"><li>it was not clear to me the real difference between <code>my</code> and <code>local</code>, and I have to confess I thought <code>local</code> was what should be the<br />name for scoped variables (maybe because of the way some shells declare <code>local</code> variables), but since <code>local</code> was usually a bad idea<br />I decided not to use either;</li><li>my scripts were quite small and self contained, so there was no risk at all about variable clash.</li></ol></div></div><br /><div class="outline-3" id="outline-container-org66d75df"><h3 id="org66d75df"><span class="section-number-3">2.5</span> Backtick as a Rescue!</h3><div class="outline-text-3" id="text-2-5">I knew pretty much well a kind of command line Unix tools (e.g., <code>grep</code>, <code>awk</code>, <code>sed</code>, <code>find</code>), and sometimes I needed<br />to do something in Perl without knowing how to do but with shell tools. So, how could I merge the both?<br /><br /><br />Easy pal: backtick the Unix tools and manage the result in Perl!<br /></div></div><br /><div class="outline-3" id="outline-container-org0e9d323"><h3 id="org0e9d323"><span class="section-number-3">2.6</span> No Modules, please</h3><div class="outline-text-3" id="text-2-6">I was not using modules, both by design and by fear.<br /><br /><br />With <i>by design</i> I mean that I was writing scripts for machine loosely connected to the Internet (just think I was working with server behind an ISDN router!),<br />and therefore even dowloading a module and install it could be quite a pain.<br /><br /><br /><i>By fear</i> means I was quite scared about importing other people's code. I was still learning about how to use correctly the <a href="http://search.cpan.org/">CPAN</a>, how to read<br />the documentation, and so on. And I did not want to install things in the wrong way on code that must run. After all, I was half-an-hour<br />away from implementing some kind of module functionality by my own (ah, the ego…).<br /></div></div><br /><div class="outline-3" id="outline-container-org95752e2"><h3 id="org95752e2"><span class="section-number-3">2.7</span> Regexp Sometimes…</h3><div class="outline-text-3" id="text-2-7">I tried to use regexp, but I was too less experienced. Therefore I usually did the substitution with <i>friendly</i> tools, like<br /><i>split</i> and alike.<br /><br /><br />I fear regexp nomore, and even if I'm not a master at all, I find interesting placing them in programs not only because<br />they allow me to write clear and compact code, but also because they still are some criptic stuff other developers<br />have hard time reading.<br /></div></div></div><br /><br /><div class="outline-2" id="outline-container-orgfcdf8e9"><h2 id="orgfcdf8e9"><span class="section-number-2">3</span> The Code</h2><div class="outline-text-2" id="text-3"></div><div class="outline-3" id="outline-container-org3205134"><h3 id="org3205134"><span class="section-number-3">3.1</span> University Distortion</h3><div class="outline-text-3" id="text-3-1">There are a couple of places where you can see evidence of the teachings at my university, most notably the<br />command line argument loop:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="color: cyan; font-weight: bold;">sub</span> <span style="color: wheat;">parseCommandLine</span>()<br />{<br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># The script must be at least two arguments.</span><br />    <span style="color: cyan; font-weight: bold;">if</span> ( $#<span style="color: orange; text-decoration: underline;">ARGV</span> &lt; <span style="color: violet; font-style: italic; font-weight: bold;">1</span> or $#<span style="color: orange; text-decoration: underline;">ARGV</span> &gt; <span style="color: violet; font-style: italic; font-weight: bold;">4</span> )<br />    {<br />        help();<br />        <span style="color: cyan; font-weight: bold;">exit</span>(<span style="color: violet; font-style: italic; font-weight: bold;">0</span>);<br />    }<br /><br />    $<span style="color: orange;">POLICY_FILE</span> = $<span style="color: orange;">DEFAULT_POLICY_FILE</span>;<br /><br />    <span style="color: cyan; font-weight: bold;">foreach</span> $<span style="color: orange;">argument</span> (@<span style="color: orange; text-decoration: underline;">ARGV</span>)<br />    {<br />        <span style="color: cyan; font-weight: bold;">if</span> ( $<span style="color: orange;">argument</span> =~  <span style="color: aquamarine;">/(-program=)/</span> )<br />        {<br />            $<span style="color: orange;">argument</span> =~ s<span style="color: aquamarine;">/(-program=)//</span>;<br />            $<span style="color: orange;">PROGRAM</span> = $<span style="color: orange;">argument</span>;<br />        }<br />        <span style="color: cyan; font-weight: bold;">elsif</span> ( $<span style="color: orange;">argument</span> =~ <span style="color: aquamarine;">/(-policy=)/</span> )<br />        {<br />            $<span style="color: orange;">argument</span> =~ s<span style="color: aquamarine;">/(-policy=)//</span>;<br />            $<span style="color: orange;">POLICY_FILE</span> = $<span style="color: orange;">argument</span>;<br />        }<br />        <span style="color: cyan; font-weight: bold;">elsif</span> ( $<span style="color: orange;">argument</span> =~ <span style="color: aquamarine;">/(-username=)/</span> )<br />        {<br />            $<span style="color: orange;">argument</span> =~ s<span style="color: aquamarine;">/(-username=)//</span>;<br />            $<span style="color: orange;">USERNAME</span> = $<span style="color: orange;">argument</span>;<br />        }<br />        <span style="color: cyan; font-weight: bold;">elsif</span> ( $<span style="color: orange;">argument</span> =~ <span style="color: aquamarine;">/(-message=)/</span> )<br />        {<br />            $<span style="color: orange;">argument</span> =~ s<span style="color: aquamarine;">/(-message=)//</span>;<br />            $<span style="color: orange;">MESSAGE_FILE</span> = $<span style="color: orange;">argument</span>;<br />        }<br />    }<br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># check main parameters</span><br />    <span style="color: cyan; font-weight: bold;">if</span> ( not defined $<span style="color: orange;">USERNAME</span> or $<span style="color: orange;">USERNAME</span> eq <span style="color: aquamarine;">""</span>)<br />    {<br />        warn(<span style="color: aquamarine;">"\nCannot find username !!\n\n"</span>);<br />        help();<br />        <span style="color: cyan; font-weight: bold;">exit</span>(<span style="color: violet; font-style: italic; font-weight: bold;">1</span>);<br />    }<br />    <span style="color: cyan; font-weight: bold;">elsif</span> ( not defined $<span style="color: orange;">PROGRAM</span> or $<span style="color: orange;">PROGRAM</span> eq <span style="color: aquamarine;">""</span>)<br />    {<br />        warn(<span style="color: aquamarine;">"\nCannot find the program name \n\n"</span>);<br />        help();<br />        <span style="color: cyan; font-weight: bold;">exit</span>(<span style="color: violet; font-style: italic; font-weight: bold;">2</span>);<br />    }<br />    <span style="color: cyan; font-weight: bold;">elsif</span> ( not defined $<span style="color: orange;">POLICY_FILE</span> or $<span style="color: orange;">POLICY_FILE</span> eq <span style="color: aquamarine;">""</span>)<br />    {<br />        warn(<span style="color: aquamarine;">"\nI need a policy file to run!\n\n"</span>);<br />        help();<br />        <span style="color: cyan; font-weight: bold;">exit</span>(<span style="color: violet; font-style: italic; font-weight: bold;">3</span>);<br />    }<br /><br /><br />}<br /></pre></div><br />As you can see I was <b>hardwiring</b> the arguments directly into the program, as well as I was not using any <i>getopt</i>-like module.<br />That was by <i>culture</i>: university never told me there was a <i>getopt</i> way of getting parameters!<br /><br /><br />Please note also that I was checking the argument numbers as well as exiting from the program with a different exit code for each branch.<br />The style reminds pretty much the C-style I was used to work with during my exams.<br /></div></div><br /><div class="outline-3" id="outline-container-org86886de"><h3 id="org86886de"><span class="section-number-3">3.2</span> Ready? Go!</h3><div class="outline-text-3" id="text-3-2">How can I execute another program from within the Perl wrapper?<br /><br /><br />Well, the simplest way that I was aware of is to call <code>execute</code>, in other words, to work as a low level C:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="color: cyan; font-weight: bold;">sub</span> <span style="color: wheat;">launch</span>($)<br />{<br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># take arguments</span><br />    <span style="color: #ce537a; font-weight: bold;">my</span> ($<span style="color: orange;">program</span>) = @<span style="color: orange; text-decoration: underline;">_</span>;<br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># execute the program</span><br />    sleep(<span style="color: violet; font-style: italic; font-weight: bold;">2</span>);<br />    <span style="color: cyan; font-weight: bold;">exec</span>($<span style="color: orange;">program</span>);<br />}<br /></pre></div></div></div><br /><div class="outline-3" id="outline-container-org16cbcec"><h3 id="org16cbcec"><span class="section-number-3">3.3</span> How Many Instances can you Run?</h3><div class="outline-text-3" id="text-3-3">How to define how many instances an user can run?<br /><br /><br />Here I decided to take inspiration from the <i>sudo</i> policy file, and so I invented my own policy file with a pretty<br />simple syntax:<br /><br /><br /><code>username@executable=instances</code><br /><br /><br />where:<br /><br /><ul class="org-ul"><li><code>username</code> was the Unix username;</li><li><code>executable</code> was the name of the executable to run;</li><li><code>instances</code> was the number of the maximum allowed instances of the <code>executable</code> for the specified <code>username</code>.</li></ul><br />And to make it looking mor eprofessional, I allowed the policy file to include a star in any field<br />in order to mean <i>anything</i> or <i>any instance</i>.<br /><br /><br />Of course, the above was full crap. For instance, if you were able to create a link from the <code>executable</code> to another<br />with the right name you could change you allowance. But luckily, no user was able to do that, and to some<br />extent even the other sysadmins!<br /><br /><br />Having defined the policy file syntax, reading the file was as simple as:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="color: cyan; font-weight: bold;">sub</span> <span style="color: wheat;">getAllowedInstances</span>($$$)<br />{<br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># take params</span><br />    <span style="color: #ce537a; font-weight: bold;">my</span> ($<span style="color: orange;">policy_file</span>, $<span style="color: orange;">username</span>, $<span style="color: orange;">program</span>) = @<span style="color: orange; text-decoration: underline;">_</span>;<br />    <span style="color: #ce537a; font-weight: bold;">my</span> $<span style="color: orange;">instances</span> = -<span style="color: violet; font-style: italic; font-weight: bold;">1</span>;<br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># try to open the policy file</span><br />    open (POLICY_FILE_HANDLER, <span style="color: aquamarine;">"&lt;"</span>.$<span style="color: orange;">policy_file</span>) || <span style="color: cyan; font-weight: bold;">die</span>(<span style="color: aquamarine;">"\nCannot parse policy file &lt;$policy_file&gt; !\n"</span>);<br />    print <span style="color: aquamarine;">"\nParsing configuration file $policy_file for program $program, username $username..."</span>;<br /><br />    $<span style="color: orange;">instances</span> = <span style="color: violet; font-style: italic; font-weight: bold;">0</span>;           <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># by default do not allow a user to execute a program</span><br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># get each line from the policy file, and then search for the username</span><br />    <span style="color: cyan; font-weight: bold;">while</span> ( $<span style="color: orange;">line</span> = &lt;<span style="color: violet; font-style: italic; font-weight: bold;">POLICY_FILE_HANDLER</span>&gt;  )<br />    {<br /><br />        print <span style="color: aquamarine;">"\n\t Configuration line: $line "</span>;<br /><br /><br />        <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># take only lines with the program name specified</span><br />        <span style="color: cyan; font-weight: bold;">if</span>( grep(<span style="color: aquamarine;">"$program"</span>, $<span style="color: orange;">line</span>) ){<br /><br />            @<span style="color: orange; text-decoration: underline;">lineParts</span> = split(<span style="color: aquamarine;">"@"</span>,$<span style="color: orange;">line</span>);<br />            $<span style="color: orange;">configUsername</span> = $<span style="color: orange;">lineParts</span>[<span style="color: violet; font-style: italic; font-weight: bold;">0</span>];<br />            print <span style="color: aquamarine;">"\ncontrollo se $username == $configUsername"</span>;<br /><br />            <span style="color: cyan; font-weight: bold;">if</span> ( $<span style="color: orange;">username</span> eq $<span style="color: orange;">configUsername</span> )<br />            {<br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># this is the right line</span><br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># take the instances number</span><br />                @<span style="color: orange; text-decoration: underline;">pieces</span> = split(<span style="color: aquamarine;">"="</span> , $<span style="color: orange;">line</span>);<br />                $<span style="color: orange;">instances</span> = $<span style="color: orange;">pieces</span>[<span style="color: violet; font-style: italic; font-weight: bold;">1</span>];<br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># remove the '\n'</span><br />                chomp($<span style="color: orange;">instances</span>);<br />                print <span style="color: aquamarine;">"\n\t\t\tUser allowance: $instances"</span>;<br />                <span style="color: cyan; font-weight: bold;">return</span> $<span style="color: orange;">instances</span>;<br />            }<br />            <span style="color: cyan; font-weight: bold;">elsif</span> ( $<span style="color: orange;">configUsername</span> eq <span style="color: aquamarine;">"*"</span> )<br />            {<br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># a valid entry for all users</span><br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># take the instances number</span><br />                @<span style="color: orange; text-decoration: underline;">pieces</span> = split(<span style="color: aquamarine;">"="</span> , $<span style="color: orange;">line</span>);<br />                $<span style="color: orange;">instances</span> = $<span style="color: orange;">pieces</span>[<span style="color: violet; font-style: italic; font-weight: bold;">1</span>];<br />                <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># remove the '\n'</span><br />                chomp($<span style="color: orange;">instances</span>);<br />                print <span style="color: aquamarine;">"\n\t\t\tGlobal allowance: $instances"</span>;<br />            }<br />        }<br />    }<br /><br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># no lines found, the user has no restrictions</span><br />    <span style="color: cyan; font-weight: bold;">return</span> $<span style="color: orange;">instances</span>;<br />}<br /></pre></div><br />What an amazing piece of code, uh?<br /><br /><br />Instead of reading the policy file once (or seldom), I was reading it fully every time I needed to check an user; it was<br />a very non-optimzed code.<br />Moreover, I was reading and grepping it a line at time, a very keyboard effort.<br /></div></div><br /><div class="outline-3" id="outline-container-org72073a3"><h3 id="org72073a3"><span class="section-number-3">3.4</span> How much are you Running?</h3><div class="outline-text-3" id="text-3-4">How to get the number of runnable instances an user was running?<br /><br /><br />Piece of cake: let's do it in Unix, backtick in Perl and increase by one:<br /><br /><br /><br /><div class="org-src-container"><pre class="src src-perl"><span style="color: cyan; font-weight: bold;">sub</span> <span style="color: wheat;">getRunningInstancesCount</span>($$)<br />{<br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># get parameters</span><br />    <span style="color: #ce537a; font-weight: bold;">my</span> ( $<span style="color: orange;">program</span>, $<span style="color: orange;">username</span> ) = @<span style="color: orange; text-decoration: underline;">_</span>;<br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># get all processes for this program and the username</span><br />    @<span style="color: orange; text-decoration: underline;">processes</span> = <span style="color: aquamarine;">`ps -u $username | grep $program | grep -v "grep"`</span>;<br /><br /><br />    <span style="background-color: #292e34; color: chartreuse; font-style: italic;"># get all lines count</span><br />    $<span style="color: orange;">running_instances</span> = <span style="color: violet; font-style: italic; font-weight: bold;">0</span>;<br />    <span style="color: cyan; font-weight: bold;">if</span> ( $#<span style="color: orange; text-decoration: underline;">processes</span> &gt;= <span style="color: violet; font-style: italic; font-weight: bold;">0</span> )<br />    {<br />        $<span style="color: orange;">running_instances</span> = $#<span style="color: orange; text-decoration: underline;">processes</span> + <span style="color: violet; font-style: italic; font-weight: bold;">1</span>;<br />    }<br />    <span style="color: cyan; font-weight: bold;">else</span><br />    {<br />        <span style="color: cyan; font-weight: bold;">return</span> <span style="color: violet; font-style: italic; font-weight: bold;">0</span>;<br />    }<br /><br />    <span style="color: cyan; font-weight: bold;">return</span> $<span style="color: orange;">running_instances</span>;<br />}<br /></pre></div><br />Please note also the adoption of literals instead of variables: for example <code>return 0;</code> instead of <code>return $running_instances</code> where<br />the latter has been already initialized to zero.<br /></div></div><br /><div class="outline-3" id="outline-container-orgf25847a"><h3 id="orgf25847a"><span class="section-number-3">3.5</span> All Pieces Together</h3><div class="outline-text-3" id="text-3-5">Now, putting the places together made the main loop as simple as:<br /><br /><br /><div class="org-src-container"><pre class="src src-perl">$<span style="color: orange;">RUNNING_INSTANCES</span> = getRunningInstancesCount($<span style="color: orange;">BASE_NAME</span>, $<span style="color: orange;">USERNAME</span>);<br />print <span style="color: aquamarine;">"\nYou're running $RUNNING_INSTANCES $BASE_NAME\n"</span>;<br /><br /><span style="background-color: #292e34; color: chartreuse; font-style: italic;"># </span><span style="background-color: #292e34; color: chartreuse; font-style: italic;">if the user can, launch the program</span><br /><span style="color: cyan; font-weight: bold;">if</span> ( $<span style="color: orange;">RUNNING_INSTANCES</span> &lt; $<span style="color: orange;">ALLOWED_INSTANCES</span> )<br />{<br />    print <span style="color: aquamarine;">"\nExecuting $PROGRAM..."</span>;<br />    launch($<span style="color: orange;">PROGRAM</span>);<br />    print <span style="color: aquamarine;">"\nBye!\n"</span>;<br />}<br /><span style="color: cyan; font-weight: bold;">else</span><br />{<br />    print <span style="color: aquamarine;">"\nYou can't run no more instances of $PROGRAM"</span>;<br />    print <span style="color: aquamarine;">"\nBye\n"</span>;<br />    displayMessage();<br />}<br /></pre></div></div></div></div><br /><br /><div class="outline-2" id="outline-container-orgb8e86f4"><h2 id="orgb8e86f4"><span class="section-number-2">4</span> Lesson Learned</h2><div class="outline-text-2" id="text-4">There is no lesson to learn here, but a lot of lessons learned in the between.<br /><br /><br />The only thing I could say is that you should never, <b>never</b>, throw away your code. Keep it, it is cheap, and someday you could<br />see how you progressed from a green programmer to the very guru developer you probably are today.<br /></div></div>