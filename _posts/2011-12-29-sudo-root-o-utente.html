---
layout: post
title: 'sudo: root o utente?'
date: '2011-12-29T18:21:00.000+01:00'
author: Luca Ferrari
tags:
- linux
- pcbsd
- freebsd
modified_time: '2011-12-29T18:21:58.313+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-2808838996933811351
blogger_orig_url: http://fluca1978.blogspot.com/2011/12/sudo-root-o-utente.html

permalink: /:year/:month/:day/:title.html
---


<h1>~</h1>


<div style="text-align: justify;">Ormai quasi tutti si sono abituati all'uso di <i>sudo</i>, un software che consente di fornire credenziali elevate (di amministratore) ad utenti normali. L'idea è semplice: l'amministratore di sistema fornisce una lista di utenti non amministratori che possono richiedere privilegi maggiori (specificando anche cosa possono fare). Quando uno di questi utenti deve eseguire un programma con privilegi maggiori invoca <i>sudo</i> che gli consente di innalzare i propri permessi.</div><div style="text-align: justify;">Se ben usato sudo aumenta anche la protezione del sistema: è possibile con sudo utilizzare un account <i>root</i> senza nemmeno averlo abilitato, e quindi lasciando un account noto (e quindi attaccato) inaccessibile.</div><div style="text-align: justify;">Molti sistemi Linux in default installano sudo abilitando per l'utente che ha effettuato la prima installazione. Un caso classico sono gli *buntu in versione sia server che desktop. L'utente quindi con una sola password puo' amministratore il computer.</div><div style="text-align: justify;"><a href="http://forums.pcbsd.org/showthread.php?t=15370">PCBSD fa una scelta di default differente</a>: abilita sudo per l'utente che effettua l'installazione ma richiede che la password fornita non sia quella dell'utente ma quella di root stesso.&nbsp;</div><div style="text-align: justify;">Qual'è la motivazione di questa scelta, a prima vista inutile? Se durante l'installazione l'utente principale viene abilitato a sudo allora questo avrà la possibilità di accedere direttamente come amministratore, cosa che a volte non è fattibile. Usando invece la password di root solo gli utenti che conoscono tale password saranno abili e abilitati a eseguire comandi privilegiati. Certo, potrebbero farlo come root stesso, ma il sistema puo' continuare a tenere l'account di root disabilitato permettendo un innalzamento dei privilegi dell'utente normale.</div><div style="text-align: justify;">Difficile dire quale scelta sia la migliore, probabilmente quella di PCBSD, anche se richiede qualche accorgimento in piu'. In entrambi i casi il comportamento puo' essere modificato dall'amministratore in qualunque momento agendo sul file <i>/etc/sudoer</i> che contiene delle righe simili a:</div><br /><pre dir="ltr" style="width: 510px;">## Uncomment to allow any user to run sudo if they know the password<br />## of the user they are running the command as (root by default).<br />Defaults targetpw  # Ask for the password of the target user</pre><br /><br />E come riporta la pagina man:<br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></div><span style="font-family: &quot;Courier New&quot;,Courier,monospace; font-size: xx-small;">targetpw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If set, sudo will prompt for the password of the user specified<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; by the -u option (defaults to root) instead of the password of<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the invoking user.&nbsp; Note that this precludes the use of a uid not<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listed in the passwd database as an argument to the -u option.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This flag is off by default.</span>