---
layout: post
title: La mia (dis)avventura con OpenSolaris 2009.11
date: '2010-01-07T22:42:00.007+01:00'
author: Luca Ferrari
tags:
- opensource
- opensolaris
modified_time: '2010-01-07T23:09:20.246+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-4809402698097489397
blogger_orig_url: http://fluca1978.blogspot.com/2010/01/la-mia-disavventura-con-opensolaris.html
---

<div style="text-align: justify;"><pre><span style=";font-family:arial;font-size:130%;"  ><span style="font-weight: bold; font-style: italic;"><br />Le premesse</span><br />Utilizzo Linux da almeno 10 anni, mi trovo molto bene con<br />un sistema così flessibile e configurabile. Grazie a Linux<br />e al suo ecosistema ho potuto apprezzare l'OpenSource e<br />sposare questo modello di sviluppo e questa filosofia di<br />pensiero. Inizialmente usavo sistemi rpm-based, poi una<br />volta scoperto il package manager di Debian mi sono<br />convertito a questi tipi di distribuxzione. Ritengo infatti<br />che passare ore a configurare e compilare software serva<br />per sistemi mission-critical, non per farmi fare altra<br />pratica e passare notti sveglio al computer.<br /><br />Sono un fan fedele del KDE, ho stretto i denti con quel<br />bagno di sangue che fu il passaggio alla versione 4.0, e<br />sono contento di aver visto tutte le versioni fin dalla<br />prima. Non apprezzo il KDE solo per il suo aspetto grafico<br />(che oggettivamente puo' essere considerato di gran lunga<br />superiore ai suoi rivali), ho studiato le librerie Qt sulle<br />quali è costruito, le ho confrontate con le GTK+ alla base<br />delle librerie e del desktop Gnome e ritengo il binomio<br />Qt/KDE molto piu' elegante di quello GTK+/Gnome. La mia<br />applicazione desktop principale è KMail, il miglior client<br />di posta che abbia mai visto (e ne ho provati tanti...).<br /><br />Sviluppo applicazioni Java (e non solo) utilizzando l'IDE<br />Eclipse, che ritengo il miglior IDE disponibile per Java.<br />Ho iniziato ad usarlo all'epoca della versione 2, dopo aver<br />visto dal vivo una dimostrazione ad una conferenza in<br />Irlanda (all'epoca usavo il pachidermico Netbeans, che<br />comunque era piu' smilzo di Forte For Java!). L'unico<br />svantaggio che trovo in Eclipse è che la versione Linux<br />utilizza il binding con GTK+, quindi il suo utilizzo in KDE<br />non risulta pienamente integrato e performante. Da notare<br />che, siccome sviluppo anche applicazioni RCP, sono legato a<br />Eclipse come piattaforma.<br /><br />Il mio editor preferito è Emacs (anch'esso con binding<br />sulle GTK+ - non poteva essere altrimenti essendo l'editor<br />di Stallman!) anche se la maggior parte delle volte<br />direttamente a terminale (quindi senza mouse).<br /><br />Quasi tutte le cose che faccio le svolgo attraverso la<br />Konsole, e spesso ho piu' di 5 tab attivi<br />contemporaneamente.<br /><br />Utilizzo Kopete per l'instant messaging, e lo trovo un<br />programma molto utile e ben strutturato, anche se devo<br />ammettere mi sembra meno polimorfico del suo antagonista<br />Pidgin.<br /><br />Il mio browser preferito è Firefox, dopo aver usato<br />infatti a lungo Konqueror ho deciso di usare il prodotto di<br />Mozilla poiché consente l'installazione di molti plugin e<br />addon per il debug e l'analisi delle applicazioni Web.<br /><br />Utilizzo git come SCM anche per i miei documenti personali<br />(almeno per quelli per i quali abbia senso mantenere le<br />versioni). Ovviamente per molti "progetti" non ha senso<br />usare uno strumento potente come git, ma sono un ingegnere<br />pragmatico e tendo ad usare i migliori strumenti<br />disponibili, o meglio quelli che ritengo migliori, per<br />capirne a fondo la mentalità e le potenzialità in ogni<br />situazione.<br /><br />Proprio per questa mia curiosità e voglia di usare sempre<br />gli strumenti migliori, qualche mese fa mi interstadisco a<br />studiare OpenSolaris. Seguo lo sviluppo del sistema dal<br />2006 (piu' o meno quando venne reso open il cuore di<br />Solaris) e conosco Solaris dai tempi dell'università<br />(amministravo alcune workstation sun4u). Quindi non ero<br />digiuno del sistema Solaris/OpenSolaris quando ho deciso di<br />riprendere in mano il sistema. E finalmente mi decido a<br />provarlo sul mio portatile, un Acer Aspire 6935, poiché<br />l'unico modo per imparare veramente un sistema, secondo me,<br />è quello di lavorarci ogni giorno. E qui comincia la mia<br />avventura.<br /><br /><span style="font-weight: bold; font-style: italic;">Installazione e utilizzo di OpenSolaris</span><br />La mia prima idea è quella di installare OpenSolaris a<br />fianco del mio sistema Linux, quindi in triple boot. Per<br />farlo libero una delle tante partizioni presenti sul mio<br />disco e inizio il proceesso di installazione di<br />OpenSolaris. Stranamente la finestra di partizionamento non<br />riconosce nessuna partizione estesa (e quella liberata era<br />ahimé estesa). Dopo un po' di ricerca sul Web ho scoperto<br />che OpenSolaris non supporta ancora le partizioni estese, e<br />quindi non posso procedere all'installazione sul mio<br />computer. A questo punto l'unica soluzione è quella di<br />rimuovere Linux, ma ancora non mi sento pronto, quindi<br />decido di installare OpenSolaris su una macchina virtuale.<br /><br />Creo quindi una macchina VirtualBox sulla quale inizio a<br />fare esperimenti. Grazie alla bibbia di OpenSolaris<br />sperimento il fantastico ZFS, le zone e IPS. Aggiorno il<br />sistema, uso RBAC, SVC e sperimento la stabilità di<br />OpenSolaris. Il sistema mi piace, così decido di provare a<br />creare un ambiente simile al mio Linux per essere sicuro<br />che tutto possa funzionare in una installazione sul<br />bare-metal.<br />Inizio dal KDE: OpenSolaris viene distribuito con Gnome, e<br />KDE 4 non è aggiornato alle ultime versioni. Con non poca<br />fatica riesco ad installare KDE 4.3.2 quando sul mio Linux<br />sto usando un KDE 4.3.4. A questo punto, con KDE al suo<br />posto, posso migrare posta, instant messaging e i profili<br />di Konsole. Ma ora viene la prima nota dolente: uno dei<br />compilatori che uso al lavoro non è disponibile per Unix<br />ma solo per Linux. La mia prima idea è quella di usare una<br />branded-zone, ma alla fine non mi interessa installare un<br />Linux virtualizzato in branded-zone, mi va bene installarlo<br />anche come VirtualBox. In sostanza, posso aggirare<br />l'ostacolo del compilatore mediante la virtualizzazione;<br />non sarà comodo come accedere direttamente dal sistema<br />host, ma almeno funzionerà. Dopotutto si deve essere<br />disposti a fare qualche sacrificio per usare il meglio che<br />ci sia, no?<br />Per gli altri programmi non sembrano esserci problemi:<br />installo Eclipse dai repository IPS e sembra tutto a posto.<br />Ahimé non lo testo appieno, cosa che mi costerà in futuro.<br />Insomma, mi sento pronto per installare OpenSolaris sul<br />bare-metal.<br /><br />Ma il bare-metal non è la macchina virtuale!<br />Dedico una partizione da 170GB a OpenSolaris e avvio il<br />processo di installazione, che stranamente si blocca al 70%<br />e si congela. Forse un problema del CD-Rom, comunque non si<br />ripeterà piu' nelle successive installazioni.<br /><br />Finalmente il momento del primo avvio e la prima amara<br />sorpresa: mentre la scheda di rete wireless funziona<br />benissimo, la scheda ethernet (Atheros) non viene<br />riconosciuta. Dopo una ricerca sul Web scopro che il driver<br />della mia scheda di rete è contenuto nel pacchetto<br />SUNWatge, ma l'installazione tramite IPS non funziona a<br />causa del diverso snv (il 2009.11 ha snv 111, mentre il<br />pacchetto in questione richiedeva snv 130). Devo quindi<br />prima aggiornare il sistema da snv_111 a snv_130, cosa che<br />richiede il download di circa 890 MB di software (tramite<br />scheda wireless!). Al riavvio del sistema un'alta amara<br />sorpresa: GDM si lamenta circa il file /Xsession e la<br />finestra di login sembra avere problemi a visualizzare<br />correttamente sfondo e menu' delle opzioni. Non solo, una<br />volta fatto il login lo schermo rimane completamente<br />bianco! Dopo un po' scopro che il sistema non è congelato,<br />sta funzionando (ALT+TAB mi mostra il movimento fra<br />finestre tutte bianche senza farmi vedere i contenuti), e<br />da una ricerca sul Web scopro che l'aggiornamento snv_130<br />ha effettivamente qualche problema con le schede grafiche<br />NVidia che puo' produrre questo strano effetto se Compiz è<br />abilitato. La soluzione consiste nel fare il login da una<br />sessione Failsafe e invocare il programma di "pulizia"<br />gnome-cleanup per rimuovere le preferenze del desktop e<br />disabilitare quindi Compiz. In questo modo, a parte il<br />problema a GDM, posso fare il login correttamente anche se<br />ora il desktop Gnome risulta "piatto" e privo di effetti.<br /><br />Prima di procedere all'installazione del software desktop<br />(KDE prima di tutto) decido di installare Eclipse. Il<br />repository IPS propone ancora Eclipse 3.4.2 anziché la<br />nuova serie 3.5, ma questo non è per me un grosso<br />problema. Però in Eclipse devo installare diverse librerie<br />e plugin (AspectJ, EGit, le librerie per lo sviluppo RCP,<br />...) e quindi inizio la procedura di installazione del<br />nuovo software dall'interno dell'IDE. Qualcosa però non<br />va: dopo le prime dialog di selezione del software, Eclipse<br />sembra bloccato. Pur premendo il classico pulsante "Next"<br />della dialog corrente, che sembra rispondere all'input,<br />l'IDE non fa nulla. Di fatto sembra che la pressione del<br />pulsante faccia perdere il focus alla selezione corrente.<br />Provo e riprovo ma non riesco ad installare i plugin che mi<br />servono.<br /><br />A questo punto mi trovo ad un punto morto: OpenSolaris ha<br />dei problemi (Eclipse, GDM, la scheda grafica) e io sono<br />senza il mio ambiente desktop e, cosa piu' importante, i<br />miei dati personali (ad esempio la posta). Nonostante fossi<br />disposto ad accettare l'uso di un KDE leggermente piu'<br />arretrato rispetto agli ultimi rilasci (purché stabili),<br />nonostante fossi anche disposto a valutare il passaggio a<br />Gnome (bisogna pur provare tutto, no?), nonostante potessi<br />soprassedere sull'assenza delle ultime versioni di Eclipse<br />(anche se la 3.5 esiste per Solaris, ma non è compatibile<br />con OpenSolaris), mi trovo con le mani legate. Insomma,<br />già puo' essere difficile il passaggio ad un sistema<br />architetturalmente differente, ma farlo senza nemmeno le<br />proprie applicazioni potrebbe essere troppo!<br /><br />Devo ripiegare e reinstallare Linux, nel quale ovviamente<br />riesco a ricaricare velocemente i miei dati e le mie<br />applicazioni. Insomma, torno al punto di partenza.<br /><br />Ma mi sono tenuto una partizione primaria per tornare a<br />sperimentare con OpenSolaris con piu' calma e direttamente<br />sul bare-metal.<br />Credo fermamente che OpenSolaris sia un sistema innovativo<br />e degno di nota, e che sia anche un'ottima dimostrazione di<br />cosa puo' fare l'OpenSource.</span><span style="font-size:130%;"> </span><br /></pre></div>