---
layout: post
title: How to destroy my fossil repository in one step!
date: '2017-02-08T18:26:00.000+01:00'
author: Luca Ferrari
tags:
- fossil
- git
modified_time: '2017-02-08T16:31:18.299+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-5534844823180260758
blogger_orig_url: http://fluca1978.blogspot.com/2017/02/how-to-destroy-my-fossil-repository-in.html

permalink: /:year/:month/:day/:title.html
---


<h1>~</h1>


<div style="text-align: justify;">Fossil and Git are two great softwares, and I use them day by day.</div><div style="text-align: justify;">Unluckily the former has less support by integrated environment, IDE, and this makes a little easier to deal with Git when working with mainstream development frameworks. But luckily, Fossil has a way to export to Git and, much more itneresting, to do a bidirectional import/export that is to export and re-import a git repository. In other words, you can work on a repository with both git and fossil pretty much at the same time.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Today I decided to realign my fossil repo to a git one, so to have the same logs and timeline available both from command like (i.e., fossil) and IDE tools. But I messed up everything:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">fossil export&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; --git&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp;--export-marks /sviluppo/fossil/luca.fossil.marks&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; /sviluppo/fossil/luca.fossil                                                                                        </span></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; | git fast-import&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp;&nbsp;&nbsp; --export-marks=/sviluppo/fossil/luca.fossil                            </span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Who catch the error?                                                                            </div><div style="text-align: justify;">Well, the git mark points to the fossil repository file, not the mark file!                     </div><div style="text-align: justify;">Boom!                                                                                           </div><div style="text-align: justify;">A whole repository destroyed in a few seconds.                                                  </div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">The only thing that can save in such a situation is a backup, but, shame on me, I didn't have a fully recent one, so I lost part of the history.</div><div style="text-align: justify;">Lesson learned: always do a backup before acting on a repository, even if you are supposed to only read from it (as in an export phase).</div><div style="text-align: justify;">Lesson learned: do not trust the shell to complete paths and filenames for you.</div>