---
layout: post
title: Cosa sono gli Emacs mode? Major mode, minor mode, oh my...
date: '2017-06-12T08:46:00.000+02:00'
author: Luca Ferrari
tags:
- emacs
modified_time: '2017-06-12T08:46:12.829+02:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-5888164571599650630
blogger_orig_url: http://fluca1978.blogspot.com/2017/06/cosa-sono-gli-emacs-mode-major-mode.html
---

Uno dei concetti chiave di <a href="https://www.gnu.org/software/emacs/">Emacs</a> che mi pare sia molto spesso sottovalutato da chi non lo utilizza è quello dei <i>mode</i>.<br />Emacs è un editor <i>multi-mode</i>, ovvero è possibile attivare piu' modi contemporaneamente.<br />A loro volta i <i>mode</i> si suddividono in due categorie principali:<br /><br /><ul class="org-ul"><li><i>major mode</i> rappresentano il contesto di un buffer;<br /></li><li><i>minor mode</i> forniscono funzioni trasversali fra uno o piu' buffer.<br /></li></ul><br />Molto spesso la differenza non viene colta, ma è importante perché l'uso combinato dei mode può personalizzare tantissimo il comportamento<br />di Emacs.<br />Anzitutto Emacs <span class="underline">ammette un solo <i>major mode</i> per buffer</span>, mentre virtualmente <span class="underline">infiniti <i>minor mode</i> possono essere attivati su ogni buffer</span>.<br /><br /><br />Un <i>major mode</i> definisce il "contesto" di utilizzo del buffer, nonché le funzioni principali fornite in quel buffer. Ad esempio<br />se si sta editando un buffer che contiene uno script Perl, il relativo major mode fornirà funzioni legate a Perl. Analogamente, se<br />si sta visualizzando il contenuto di una directory, il relativo major mode (es. <code>dired</code>) fornirà le funzioni principali<br />per interagire con il buffer. Un major mode può anche "rimappare" alcuni tasti funzione per rendere piu' facile l'utilizzo all'interno<br />di tale buffer.<br /><br /><br />Un <i>minor mode</i> fornisce sottofunzioni specifiche all'interno del buffer, e magari a livello globale su tutti i buffer. L'esempio classico<br />è quello del correttore ortografico (es. <code>flyspell</code>) che agisce sul testo indipendentemente questo sia codice o testo o una chat.<br /><br /><br />Per meglio comprendere questi concetti, mi si passi un blasfemo paragone con Eclipse.<br />In Eclipse è possibile editare progetti Java, C/C++, Perl, PHP, Python (e altri). A seconda del tipo di progetto Eclipse carica funzioni<br />differenti e fornisce refactoring e renaming in modo differente, e questo è esattamente quello che fa un <i>major mode</i> Emacs. Ecco perché poco<br />sopra ho parlato di "contesti" del buffer.<br />Tornando ad Eclipse, i commenti e le parole chiave vengono evidenziate in modo analogo fra i vari linguaggi, come pure i marker degli errori<br />e dei problemi, e questo è quello che fa il minor mode Emacs (ok, per i font c'è la <i>fontify</i>, ma non scendiamo a questo livello).<br />E i template del codice? Eclipse fornisce template per, ad esempio, i <code>get</code> e <code>set</code> (getter e setter), cosa che in realtà richiede due passaggi: uno di<br />front-end e uno di backend. Il front-end mostra la UI all'utente, il back-end scrive il codice contestualizzato. Questa operazione può essere<br />fatta in Emacs tramite un altro minor mode (es. <code>yas</code>).<br /><br /><br />Per riassumere si tenga sempre presente che il <i>major mode stabilisce cosa è possibile fare con un buffer</i>, sia in termini di contenuti, che di tasti funzioni,<br />che di funzioni stesse, mentre un <i>minor mode stabilisce quali arricchimenti si possono fornire al contenuto del buffer</i>.<br />La linea di separazione non è così marcata, perché come è noto Emacs è un ecosistema che si piega su stesso e si espande, ma per avvicinarsi a questo<br />strumento quanto sopra dovrebbe bastare.<br />