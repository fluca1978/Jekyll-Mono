---
layout: post
title: Fluent Interfaces e method-chaining
date: '2017-03-03T17:15:00.000+01:00'
author: Luca Ferrari
tags:
- programmazione
- php
- programming best practice
- java
modified_time: '2017-03-03T17:15:11.068+01:00'
blogger_id: tag:blogger.com,1999:blog-1836481905487384887.post-6759257688545998931
blogger_orig_url: http://fluca1978.blogspot.com/2017/03/fluent-interfaces-e-method-chaining.html

permalink: /:year/:month/:day/:title.html
---


<h1>~</h1>


<div style="text-align: justify;">La prima volta che ho visto una "fluent" interface è stato quando tanti anni fa ho studiato Java NIO.</div><div style="text-align: justify;">Oggi la fluent interface è una buona prassi di molti linguaggi di programmazione, e in modo un po' ridicolo qualcosa di non accettato in Java stesso.</div><div style="text-align: justify;">L'idea di una fluent interface è abbastanza semplice: i mutators dovrebbero ritornare un riferimento all'oggetto che modificano, così da abilitare una method chain, in sostanza:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">MyObject foo = ...;</span></span></div><div style="text-align: justify;"><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">foo.setTitle( 'My Object' ).setVisible( true ).setDescription( 'Here the description' );</span></span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">che sicuramente risulta piu' compatto rispetto al classico</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">MyObject foo = ...;</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">foo.setTitle( 'My Object' );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">foo.setVisible( true );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">foo.setDescription( 'Here the description' );</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Ora, che si tratti di una versione piu' leggibile o meno è una questione di gusti, sicuramente avere linee troppo lunghe non aumenta la leggibilità, ma considerando che molti linguaggi ammettono la gestione flessibile degli spazi, una via di mezzo fra la method-chain e l'approccio classico diventa</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">MyObject foo = ...;</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">foo.setTitle( 'My Object' )</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp; .setVisible( true )</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp; .setDescription( 'Here the description' );</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">abbstanza compatto e leggibile, grazie ad una buona indentazione.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Ma il vero vantaggio della fluent interface si nota, a mio avviso, nell'uso combinato dei conditionals. Si consideri il seguente esempio:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">MyObject foo = ...;</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">if ( init ) {</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; foo.setTitle( 'My Object' );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; foo.setVisible( true );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; foo.setDescription( 'Here the description' );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">}</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">che può agilmente essere riscritto eliminando la necessità di piu' istruzioni e le parentesi graffe:</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">MyObject foo = ...;</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">if ( init )</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; foo.setTitle( 'My Object' );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; .setVisible( true );</span></div><div style="text-align: justify;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; .setDescription( 'Here the description' );</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">E questo a me personalmente piace molto!</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Ahimé i Java Beans, stupidamente, si rifiutano di accettare la fluent interface e abilitare la method-chain. Infatti la specifica impone che i mutators siano di tipo "void", ossia non ritornino nulla. E i framework aderiscono spesso severamente a questa opzione, non riconoscendo quindi i mutators che possono ritornare un riferimento all'istanza stessa.</div>